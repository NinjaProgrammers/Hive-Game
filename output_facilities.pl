:- module(output_facilities, [print_board/0]).

board("     ____        ____        ____        ____        ____        ____        ____        ____        ____        ____
    /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
   / 000  \\____/ 030  \\____/ 060  \\____/ 090  \\____/ 120  \\____/ 150  \\____/ 180  \\____/ 210  \\____/ 240  \\____/ 270  \\____
   \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
    \\____/ 015  \\____/ 045  \\____/ 075  \\____/ 105  \\____/ 135  \\____/ 165  \\____/ 195  \\____/ 225  \\____/ 255  \\____/ 285  \\
    /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /
   / 001  \\____/ 031  \\____/ 061  \\____/ 091  \\____/ 121  \\____/ 151  \\____/ 181  \\____/ 211  \\____/ 241  \\____/ 271  \\____/
   \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
    \\____/ 016  \\____/ 046  \\____/ 076  \\____/ 106  \\____/ 136  \\____/ 166  \\____/ 196  \\____/ 226  \\____/ 256  \\____/ 286  \\
    /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /
   / 002  \\____/ 032  \\____/ 062  \\____/ 092  \\____/ 122  \\____/ 152  \\____/ 182  \\____/ 212  \\____/ 242  \\____/ 272  \\____/
   \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
    \\____/ 017  \\____/ 047  \\____/ 077  \\____/ 107  \\____/ 137  \\____/ 167  \\____/ 197  \\____/ 227  \\____/ 257  \\____/ 287  \\
    /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /
   / 003  \\____/ 033  \\____/ 063  \\____/ 093  \\____/ 123  \\____/ 153  \\____/ 183  \\____/ 213  \\____/ 243  \\____/ 273  \\____/
   \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
    \\____/ 018  \\____/ 048  \\____/ 078  \\____/ 108  \\____/ 138  \\____/ 168  \\____/ 198  \\____/ 228  \\____/ 258  \\____/ 288  \\
    /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /
   / 004  \\____/ 034  \\____/ 064  \\____/ 094  \\____/ 124  \\____/ 154  \\____/ 184  \\____/ 214  \\____/ 244  \\____/ 274  \\____/
   \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
    \\____/ 019  \\____/ 049  \\____/ 079  \\____/ 109  \\____/ 139  \\____/ 169  \\____/ 199  \\____/ 229  \\____/ 259  \\____/ 289  \\
    /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /
   / 005  \\____/ 035  \\____/ 065  \\____/ 095  \\____/ 125  \\____/ 155  \\____/ 185  \\____/ 215  \\____/ 245  \\____/ 275  \\____/
   \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
    \\____/ 020  \\____/ 050  \\____/ 080  \\____/ 110  \\____/ 140  \\____/ 170  \\____/ 200  \\____/ 230  \\____/ 260  \\____/ 290  \\
    /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /
   / 006  \\____/ 036  \\____/ 066  \\____/ 096  \\____/ 126  \\____/ 156  \\____/ 186  \\____/ 216  \\____/ 246  \\____/ 276  \\____/
   \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
    \\____/ 021  \\____/ 051  \\____/ 081  \\____/ 111  \\____/ 141  \\____/ 171  \\____/ 201  \\____/ 231  \\____/ 261  \\____/ 291  \\
    /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /
   / 007  \\____/ 037  \\____/ 067  \\____/ 097  \\____/ 127  \\____/ 157  \\____/ 187  \\____/ 217  \\____/ 247  \\____/ 277  \\____/
   \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
    \\____/ 022  \\____/ 052  \\____/ 082  \\____/ 112  \\____/ 142  \\____/ 172  \\____/ 202  \\____/ 232  \\____/ 262  \\____/ 292  \\
    /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /
   / 008  \\____/ 038  \\____/ 068  \\____/ 098  \\____/ 128  \\____/ 158  \\____/ 188  \\____/ 218  \\____/ 248  \\____/ 278  \\____/
   \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
    \\____/ 023  \\____/ 053  \\____/ 083  \\____/ 113  \\____/ 143  \\____/ 173  \\____/ 203  \\____/ 233  \\____/ 263  \\____/ 293  \\
    /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /
   / 009  \\____/ 039  \\____/ 069  \\____/ 099  \\____/ 129  \\____/ 159  \\____/ 189  \\____/ 219  \\____/ 249  \\____/ 279  \\____/
   \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
    \\____/ 024  \\____/ 054  \\____/ 084  \\____/ 114  \\____/ 144  \\____/ 174  \\____/ 204  \\____/ 234  \\____/ 264  \\____/ 294  \\
    /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /
   / 010  \\____/ 040  \\____/ 070  \\____/ 100  \\____/ 130  \\____/ 160  \\____/ 190  \\____/ 220  \\____/ 250  \\____/ 280  \\____/
   \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
    \\____/ 025  \\____/ 055  \\____/ 085  \\____/ 115  \\____/ 145  \\____/ 175  \\____/ 205  \\____/ 235  \\____/ 265  \\____/ 295  \\
    /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /
   / 011  \\____/ 041  \\____/ 071  \\____/ 101  \\____/ 131  \\____/ 161  \\____/ 191  \\____/ 221  \\____/ 251  \\____/ 281  \\____/
   \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
    \\____/ 026  \\____/ 056  \\____/ 086  \\____/ 116  \\____/ 146  \\____/ 176  \\____/ 206  \\____/ 236  \\____/ 266  \\____/ 296  \\
    /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /
   / 012  \\____/ 042  \\____/ 072  \\____/ 102  \\____/ 132  \\____/ 162  \\____/ 192  \\____/ 222  \\____/ 252  \\____/ 282  \\____/
   \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
    \\____/ 027  \\____/ 057  \\____/ 087  \\____/ 117  \\____/ 147  \\____/ 177  \\____/ 207  \\____/ 237  \\____/ 267  \\____/ 297  \\
    /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /
   / 013  \\____/ 043  \\____/ 073  \\____/ 103  \\____/ 133  \\____/ 163  \\____/ 193  \\____/ 223  \\____/ 253  \\____/ 283  \\____/
   \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
    \\____/ 028  \\____/ 058  \\____/ 088  \\____/ 118  \\____/ 148  \\____/ 178  \\____/ 208  \\____/ 238  \\____/ 268  \\____/ 298  \\
    /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /
   / 014  \\____/ 044  \\____/ 074  \\____/ 104  \\____/ 134  \\____/ 164  \\____/ 194  \\____/ 224  \\____/ 254  \\____/ 284  \\____/
   \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\
    \\____/ 029  \\____/ 059  \\____/ 089  \\____/ 119  \\____/ 149  \\____/ 179  \\____/ 209  \\____/ 239  \\____/ 269  \\____/ 299  \\
         \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /    \\      /
          \\____/      \\____/      \\____/      \\____/      \\____/      \\____/      \\____/      \\____/      \\____/      \\____/
   
   
   
   
   
   
   ").
   
   replace_substring(String,To_Replace,Replace_With,Result):-
       (   append([Front,To_Replace,Back],String)
       ->  append([Front,Replace_With,Back],Result)
       ;   Result = String
       ).
   
   
   :- use_module([utils,position,pieces]).
   
   make_chars(Pos,C):- Pos >= 0, Pos < 10,!,
                       atom_chars(Pos,B), append(['0','0'],B,C).
   make_chars(Pos,C):- Pos < 100,!,
                       atom_chars(Pos,B),append(['0'],B,C).
   make_chars(Pos,C):- atom_chars(Pos,C).
   
   
   put_pieces(Pos,Res):- Pos < 300, not(occupied(Pos)),!,
                         P is Pos + 1, put_pieces(P,Res).
   
   put_pieces(Pos,Res):- Pos < 300, !,
                         upper_bug(Pos,Bug),make_chars(Pos,C),
                         board_name(Bug,Name),
                         replace_substring(Res,C,Name,New),
                         P is Pos + 1, put_pieces(P,New).
   put_pieces(300,Res):- my_print(Res,-1),!.
   
   my_print([H],_):- write(H).
   my_print([H|T],_):-atom_char(H,X), X >= 65, X =< 90,!,
                 ansi_format([fg(red)],H,[]),
                 my_print(T,1).
   
   my_print([H|T],_):- atom_char(H,X), X >= 97, X=< 122,!,
                     ansi_format([fg(blue)],H,[]),
                     my_print(T,0).
   
   my_print([H|T],Color):- atom_char(H,X), X >= 49, X=< 51,
                    Color =:= 1,!, ansi_format([fg(red)],H,[]),
                    my_print(T,-1).
   
   my_print([H|T],Color):- atom_char(H,X), X >= 49, X=< 51,
                    Color =:= 0,!, ansi_format([fg(blue)],H,[]),
                    my_print(T,-1).
   
   my_print([H|T],Color):- atom_char(H,X), X >= 49, X=< 51,
                    Color =:= -1, write(H),
                    my_print(T,-1).
   
   my_print([H|T],_):- write(H),my_print(T,-1).
   
   print_board:- board(X), string_chars(X,C), put_pieces(0,C).
   
   